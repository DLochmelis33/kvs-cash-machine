\hypertarget{classkvs_1_1storage_1_1Storage}{}\doxysection{kvs\+::storage\+::Storage Class Reference}
\label{classkvs_1_1storage_1_1Storage}\index{kvs::storage::Storage@{kvs::storage::Storage}}


An abstraction for safely opening, reading, writing and closing files on disk.  




{\ttfamily \#include $<$Storage.\+h$>$}



Collaboration diagram for kvs\+::storage\+::Storage\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=191pt]{classkvs_1_1storage_1_1Storage__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classkvs_1_1storage_1_1Storage_a4912b2adf68d76a99f4772529741dad3}{Storage}} (std\+::string filename)
\begin{DoxyCompactList}\small\item\em Construct a new \mbox{\hyperlink{classkvs_1_1storage_1_1Storage}{Storage}} from the specified file. Fails if the file doesn\textquotesingle{}t exist. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classkvs_1_1storage_1_1Storage_a6fa129ebd4897a029c736bd141c2a48f}{close}} ()
\begin{DoxyCompactList}\small\item\em Apply all changes to the file contents (if any) and close the file. All further operations with this \mbox{\hyperlink{classkvs_1_1storage_1_1Storage}{Storage}} object are disallowed. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classkvs_1_1utils_1_1ByteArray}{Byte\+Array}} \mbox{\hyperlink{classkvs_1_1storage_1_1Storage_a16417d140a6c8e88ae6d088747dd6f2a}{read}} (size\+\_\+t offset, size\+\_\+t length)
\begin{DoxyCompactList}\small\item\em Read a part of file. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classkvs_1_1storage_1_1Storage_a8cba1c39408d86f6ab9170836b33bc7a}{write}} (size\+\_\+t offset, \mbox{\hyperlink{classkvs_1_1utils_1_1ByteArray}{Byte\+Array}} bytes)
\begin{DoxyCompactList}\small\item\em Write a part of file. If the specified part exceeds the end of file, extra data is appended. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{classkvs_1_1storage_1_1Storage_a886d77329f632d3917532f72f3108562}{append}} (\mbox{\hyperlink{classkvs_1_1utils_1_1ByteArray}{Byte\+Array}} bytes)
\begin{DoxyCompactList}\small\item\em Append to end of file. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::fstream \mbox{\hyperlink{classkvs_1_1storage_1_1Storage_aeae3f082beef7bb2f3b13ef752a1d41a}{file}}
\item 
size\+\_\+t \mbox{\hyperlink{classkvs_1_1storage_1_1Storage_ac56ca90eedae8c9aa302c092250aa62a}{file\+Size}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
An abstraction for safely opening, reading, writing and closing files on disk. 

If any operation fails, throws a new \mbox{\hyperlink{classkvs_1_1KVSException}{KVSException}}. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classkvs_1_1storage_1_1Storage_a4912b2adf68d76a99f4772529741dad3}\label{classkvs_1_1storage_1_1Storage_a4912b2adf68d76a99f4772529741dad3}} 
\index{kvs::storage::Storage@{kvs::storage::Storage}!Storage@{Storage}}
\index{Storage@{Storage}!kvs::storage::Storage@{kvs::storage::Storage}}
\doxysubsubsection{\texorpdfstring{Storage()}{Storage()}}
{\footnotesize\ttfamily kvs\+::storage\+::\+Storage\+::\+Storage (\begin{DoxyParamCaption}\item[{std\+::string}]{filename }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}



Construct a new \mbox{\hyperlink{classkvs_1_1storage_1_1Storage}{Storage}} from the specified file. Fails if the file doesn\textquotesingle{}t exist. 


\begin{DoxyExceptions}{Exceptions}
{\em \mbox{\hyperlink{classkvs_1_1KVSException}{KVSException}}} & if the file doesn\textquotesingle{}t exist. \\
\hline
\end{DoxyExceptions}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classkvs_1_1storage_1_1Storage_a886d77329f632d3917532f72f3108562}\label{classkvs_1_1storage_1_1Storage_a886d77329f632d3917532f72f3108562}} 
\index{kvs::storage::Storage@{kvs::storage::Storage}!append@{append}}
\index{append@{append}!kvs::storage::Storage@{kvs::storage::Storage}}
\doxysubsubsection{\texorpdfstring{append()}{append()}}
{\footnotesize\ttfamily size\+\_\+t kvs\+::storage\+::\+Storage\+::append (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classkvs_1_1utils_1_1ByteArray}{Byte\+Array}}}]{bytes }\end{DoxyParamCaption})}



Append to end of file. 

Supports zero-\/length Byte\+Array.

\begin{DoxyReturn}{Returns}
The size of file in bytes before appending. 
\end{DoxyReturn}
\mbox{\Hypertarget{classkvs_1_1storage_1_1Storage_a6fa129ebd4897a029c736bd141c2a48f}\label{classkvs_1_1storage_1_1Storage_a6fa129ebd4897a029c736bd141c2a48f}} 
\index{kvs::storage::Storage@{kvs::storage::Storage}!close@{close}}
\index{close@{close}!kvs::storage::Storage@{kvs::storage::Storage}}
\doxysubsubsection{\texorpdfstring{close()}{close()}}
{\footnotesize\ttfamily void kvs\+::storage\+::\+Storage\+::close (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Apply all changes to the file contents (if any) and close the file. All further operations with this \mbox{\hyperlink{classkvs_1_1storage_1_1Storage}{Storage}} object are disallowed. 

\mbox{\Hypertarget{classkvs_1_1storage_1_1Storage_a16417d140a6c8e88ae6d088747dd6f2a}\label{classkvs_1_1storage_1_1Storage_a16417d140a6c8e88ae6d088747dd6f2a}} 
\index{kvs::storage::Storage@{kvs::storage::Storage}!read@{read}}
\index{read@{read}!kvs::storage::Storage@{kvs::storage::Storage}}
\doxysubsubsection{\texorpdfstring{read()}{read()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classkvs_1_1utils_1_1ByteArray}{Byte\+Array}} kvs\+::storage\+::\+Storage\+::read (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{offset,  }\item[{size\+\_\+t}]{length }\end{DoxyParamCaption})}



Read a part of file. 


\begin{DoxyParams}{Parameters}
{\em offset} & The offset from the beggining of the file. \\
\hline
{\em length} & The length of the part to read. Can be 0. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classkvs_1_1storage_1_1Storage_a8cba1c39408d86f6ab9170836b33bc7a}\label{classkvs_1_1storage_1_1Storage_a8cba1c39408d86f6ab9170836b33bc7a}} 
\index{kvs::storage::Storage@{kvs::storage::Storage}!write@{write}}
\index{write@{write}!kvs::storage::Storage@{kvs::storage::Storage}}
\doxysubsubsection{\texorpdfstring{write()}{write()}}
{\footnotesize\ttfamily void kvs\+::storage\+::\+Storage\+::write (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{offset,  }\item[{\mbox{\hyperlink{classkvs_1_1utils_1_1ByteArray}{Byte\+Array}}}]{bytes }\end{DoxyParamCaption})}



Write a part of file. If the specified part exceeds the end of file, extra data is appended. 


\begin{DoxyParams}{Parameters}
{\em offset} & The offset from the beggining of the file. \\
\hline
{\em length} & The length of the part to read. Can be 0. \\
\hline
\end{DoxyParams}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classkvs_1_1storage_1_1Storage_aeae3f082beef7bb2f3b13ef752a1d41a}\label{classkvs_1_1storage_1_1Storage_aeae3f082beef7bb2f3b13ef752a1d41a}} 
\index{kvs::storage::Storage@{kvs::storage::Storage}!file@{file}}
\index{file@{file}!kvs::storage::Storage@{kvs::storage::Storage}}
\doxysubsubsection{\texorpdfstring{file}{file}}
{\footnotesize\ttfamily std\+::fstream kvs\+::storage\+::\+Storage\+::file\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classkvs_1_1storage_1_1Storage_ac56ca90eedae8c9aa302c092250aa62a}\label{classkvs_1_1storage_1_1Storage_ac56ca90eedae8c9aa302c092250aa62a}} 
\index{kvs::storage::Storage@{kvs::storage::Storage}!fileSize@{fileSize}}
\index{fileSize@{fileSize}!kvs::storage::Storage@{kvs::storage::Storage}}
\doxysubsubsection{\texorpdfstring{fileSize}{fileSize}}
{\footnotesize\ttfamily size\+\_\+t kvs\+::storage\+::\+Storage\+::file\+Size\hspace{0.3cm}{\ttfamily [private]}}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
include/\mbox{\hyperlink{Storage_8h}{Storage.\+h}}\item 
src/\mbox{\hyperlink{Storage_8cpp}{Storage.\+cpp}}\end{DoxyCompactItemize}
